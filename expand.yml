---
- include: configuration/update_cache.yml
  tags:
  - cache
  - os-pre-req
  - apigee-pre-req
  - cassandra
  - elastic
  - portal
  - baas

- include: configuration/load-opdk-credentials.yml
  vars:
    hosts: 'dc2'
  tags:
  - credentials
  - os-pre-req
  - apigee-pre-req

- include: configuration/opdk-setup-os.yml
  vars:
    hosts: 'dc2'
  tags:
  - os
  - os-pre-req

- include: configuration/update-user.yml
  vars:
    hosts: 'dc2'
    user: 'root'
  tags:
  - root-user
  - os-pre-req

- include: components/opdk-pre-requisites.yml
  vars:
    hosts: 'dc2'
    jdk_version: '1.8'
  tags:
  - apigee-pre-req

- include: components/opdk-install-component.yml
  vars:
    hosts: 'dc2-cassandra'
    component_profile: 'c'
  tags:
  - cassandra

- include: components/opdk-install-component.yml
  vars:
    hosts: 'dc2-elastic'
    component_profile: 'e'
  tags:
  - elastic

- include: components/opdk-install-component.yml
  vars:
    hosts: 'dc2-baas'
    component_profile: 'b'
  tags:
  - baas

- include: components/opdk-install-component.yml
  vars:
    hosts: 'dc2-portal'
    component_profile: 'p'
  tags:
  - portal

- name: Update dc1-cassandra
  include: components/opdk-install-component.yml
  vars:
    hosts: 'dc1-cassandra'
    component_profile: 'c'
  tags:
  - dc1-cassandra

